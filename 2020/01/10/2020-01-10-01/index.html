<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  
  <title>SQL基础教程（2） | lee的博客</title>
  <meta name="author" content="Lee JJ">
  
  <meta name="description" content="人一旦有了梦想，怎么活都是有灵魂的">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="SQL基础教程（2）"/>
  <meta property="og:site_name" content="lee的博客"/>

  
    <meta property="og:image" content=""/>
  

  <link rel="shortcut icon" href="/favicon.png">
  
  
<link rel="stylesheet" href="/css/style.css">

  <!--[if lt IE 9]><script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script><![endif]-->
  

<meta name="generator" content="Hexo 5.0.2"></head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">lee的博客</a></h1>
  <h2><a href="/">lee的博客</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/null">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article id="post-2020-01-10-01" class="h-entry post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time class="dt-published" datetime="2020-01-10T09:10:33.000Z"><a href="/2020/01/10/2020-01-10-01/">2020-01-10</a></time>
      
      
  
    <h1 class="p-name title" itemprop="headline name">SQL基础教程（2）</h1>
  

    </header>
    <div class="e-content entry" itemprop="articleBody">
      
        <h4 id="函数、谓词、CASE表达式"><a href="#函数、谓词、CASE表达式" class="headerlink" title="函数、谓词、CASE表达式"></a>函数、谓词、CASE表达式</h4><h5 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h5><p>先创建表和数据</p>
<a id="more"></a>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> SampleMath (</span><br><span class="line">    m <span class="type">numeric</span> (<span class="number">10</span>, <span class="number">3</span>),</span><br><span class="line">    n <span class="type">integer</span> ,</span><br><span class="line">    p <span class="type">integer</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SampleMath <span class="keyword">values</span> (<span class="number">500</span>, <span class="number">0</span>, <span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SampleMath <span class="keyword">values</span> (<span class="number">-180</span>, <span class="number">0</span>, <span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SampleMath <span class="keyword">values</span> (<span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SampleMath <span class="keyword">values</span> (<span class="keyword">null</span>, <span class="number">7</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SampleMath <span class="keyword">values</span> (<span class="keyword">null</span>, <span class="number">5</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SampleMath <span class="keyword">values</span> (<span class="keyword">null</span>, <span class="number">4</span>, <span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SampleMath <span class="keyword">values</span> (<span class="number">8</span>, <span class="keyword">null</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SampleMath <span class="keyword">values</span> (<span class="number">2.27</span>, <span class="number">1</span>, <span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SampleMath <span class="keyword">values</span> (<span class="number">5.555</span>, <span class="number">2</span>, <span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SampleMath <span class="keyword">values</span> (<span class="keyword">null</span>, <span class="number">1</span>, <span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SampleMath <span class="keyword">values</span> (<span class="number">8.76</span>, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure>

<h6 id="abs-数值"><a href="#abs-数值" class="headerlink" title="abs(数值)"></a>abs(数值)</h6><p>计算绝对值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> m, <span class="built_in">abs</span>(m) <span class="keyword">as</span> abs_col <span class="keyword">from</span> SampleMath;</span><br></pre></td></tr></table></figure>

<h6 id="mod-被除数-除数"><a href="#mod-被除数-除数" class="headerlink" title="mod(被除数, 除数)"></a>mod(被除数, 除数)</h6><p>计算除法余数（求余）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> n, p, <span class="built_in">mod</span>(n, p) <span class="keyword">as</span> mod_col <span class="keyword">from</span> SampleMath;</span><br></pre></td></tr></table></figure>

<h6 id="round-对象数值-保留小数的位数"><a href="#round-对象数值-保留小数的位数" class="headerlink" title="round(对象数值, 保留小数的位数)"></a>round(对象数值, 保留小数的位数)</h6><p>四舍五入，如果指定位数为1，那么会对小数点第2位进行四舍五入处理</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> m, n, round(m, n) <span class="keyword">as</span> round_col <span class="keyword">from</span> SampleMath;</span><br></pre></td></tr></table></figure>

<h6 id="字符串拼接函数"><a href="#字符串拼接函数" class="headerlink" title="字符串拼接函数"></a>字符串拼接函数</h6><p>Mysql 中使用 concat， PostgreSql 中用 ||</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> str1, str2, concat(str1, str2) <span class="keyword">as</span> str_concat <span class="keyword">from</span> SampleStr;</span><br></pre></td></tr></table></figure>

<h6 id="length函数"><a href="#length函数" class="headerlink" title="length函数"></a>length函数</h6><p>字符串长度，注意这里由于每个DBMS的计算方式不同，结果可能不一样，这涉及到字符串的字节</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> str1, length(str1) <span class="keyword">as</span> len_str <span class="keyword">from</span> SampleStr;</span><br></pre></td></tr></table></figure>

<h6 id="lower-字符串"><a href="#lower-字符串" class="headerlink" title="lower(字符串)"></a>lower(字符串)</h6><p>小写转换，对应的upper是大写转换</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> str1, <span class="built_in">lower</span>(str1) <span class="keyword">as</span> low_str <span class="keyword">from</span> SampleStr <span class="keyword">where</span> str1 <span class="keyword">in</span> (<span class="string">&#x27;ABC&#x27;</span>, <span class="string">&#x27;aBC&#x27;</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;山田&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h6 id="replace-对象字符串-替换前的字符串-替换后的字符串"><a href="#replace-对象字符串-替换前的字符串-替换后的字符串" class="headerlink" title="replace(对象字符串, 替换前的字符串, 替换后的字符串)"></a>replace(对象字符串, 替换前的字符串, 替换后的字符串)</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> str1, str2, str3, replace(str1, str2, str3) <span class="keyword">as</span> rep_str <span class="keyword">from</span> SampleStr;</span><br></pre></td></tr></table></figure>

<h6 id="substring-对象的字符串-from-截取的起始位置-for-截取的字符数"><a href="#substring-对象的字符串-from-截取的起始位置-for-截取的字符数" class="headerlink" title="substring(对象的字符串 from 截取的起始位置 for 截取的字符数)"></a>substring(对象的字符串 from 截取的起始位置 for 截取的字符数)</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> str1, <span class="built_in">substring</span>(str1 <span class="keyword">from</span> <span class="number">3</span> <span class="keyword">for</span> <span class="number">2</span>) <span class="keyword">as</span> sub_str <span class="keyword">from</span> SampleStr;</span><br></pre></td></tr></table></figure>

<h6 id="current-date-当前日期"><a href="#current-date-当前日期" class="headerlink" title="current_date 当前日期"></a>current_date 当前日期</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">current_date</span>;</span><br></pre></td></tr></table></figure>

<h6 id="current-time-当前时间"><a href="#current-time-当前时间" class="headerlink" title="current_time 当前时间"></a>current_time 当前时间</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">current_time</span>;</span><br></pre></td></tr></table></figure>

<h6 id="current-timestamp-当前日期和时间"><a href="#current-timestamp-当前日期和时间" class="headerlink" title="current_timestamp 当前日期和时间"></a>current_timestamp 当前日期和时间</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">current_timestamp</span>;</span><br></pre></td></tr></table></figure>

<h6 id="extract-截取日期元素"><a href="#extract-截取日期元素" class="headerlink" title="extract 截取日期元素"></a>extract 截取日期元素</h6><p>extract(日期元素 from 日期)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">current_timestamp</span>,</span><br><span class="line">       <span class="built_in">extract</span>(<span class="keyword">year</span> <span class="keyword">from</span> <span class="built_in">current_timestamp</span>) <span class="keyword">as</span> <span class="keyword">year</span>,</span><br><span class="line">       <span class="built_in">extract</span>(<span class="keyword">month</span> <span class="keyword">from</span> <span class="built_in">current_timestamp</span>) <span class="keyword">as</span> <span class="keyword">month</span>,</span><br><span class="line">       <span class="built_in">extract</span>(<span class="keyword">day</span> <span class="keyword">from</span> <span class="built_in">current_timestamp</span>) <span class="keyword">as</span> <span class="keyword">day</span>,</span><br><span class="line">       <span class="built_in">extract</span>(<span class="keyword">hour</span> <span class="keyword">from</span> <span class="built_in">current_timestamp</span>) <span class="keyword">as</span> <span class="keyword">hour</span>,</span><br><span class="line">       <span class="built_in">extract</span>(<span class="keyword">minute</span> <span class="keyword">from</span> <span class="built_in">current_timestamp</span>) <span class="keyword">as</span> <span class="keyword">minute</span>,</span><br><span class="line">       <span class="built_in">extract</span>(<span class="keyword">second</span> <span class="keyword">from</span> <span class="built_in">current_timestamp</span>) <span class="keyword">as</span> <span class="keyword">second</span>;</span><br></pre></td></tr></table></figure>

<h6 id="cast-类型转换"><a href="#cast-类型转换" class="headerlink" title="cast 类型转换"></a>cast 类型转换</h6><p>case(转换前的值 as 想要转换的数据类型)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">cast</span>(<span class="string">&#x27;0001&#x27;</span> <span class="keyword">as</span> signed <span class="type">integer</span>) <span class="keyword">as</span> int_col;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">cast</span>(<span class="string">&#x27;2009-12-14&#x27;</span> <span class="keyword">as</span> <span class="type">date</span>) <span class="keyword">as</span> date_col;</span><br></pre></td></tr></table></figure>

<h6 id="coalesce-将NULL转换为其他值"><a href="#coalesce-将NULL转换为其他值" class="headerlink" title="coalesce 将NULL转换为其他值"></a>coalesce 将NULL转换为其他值</h6><p>coalesce(数据1, 数据2, 数据3…)<br>是sql特有的函数。该函数会返回可变参数中左侧开始第1个不是NULL的值。参数个数是可变的，因此可以根据需要无限增加。<br>在sql语句中将NULL转换为其他值时就会用到转换函数。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">coalesce</span>(<span class="keyword">null</span>, <span class="number">1</span>) <span class="keyword">as</span> col_1,</span><br><span class="line">       <span class="built_in">coalesce</span>(<span class="keyword">null</span>, <span class="string">&#x27;test&#x27;</span>, <span class="keyword">null</span>) <span class="keyword">as</span> col_2,</span><br><span class="line">       <span class="built_in">coalesce</span>(<span class="keyword">null</span>, <span class="keyword">null</span>, <span class="string">&#x27;2009-11-01&#x27;</span>) <span class="keyword">as</span> col_3;</span><br><span class="line">       </span><br><span class="line"><span class="keyword">select</span> <span class="built_in">coalesce</span>(str2, <span class="string">&#x27;NULL&#x27;</span>) <span class="keyword">from</span> SampleStr;</span><br></pre></td></tr></table></figure>

<h5 id="谓词"><a href="#谓词" class="headerlink" title="谓词"></a>谓词</h5><h6 id="like-字符串的部分一致查询"><a href="#like-字符串的部分一致查询" class="headerlink" title="like 字符串的部分一致查询"></a>like 字符串的部分一致查询</h6><p>查询结果有前方一致、中间一致和后方一致这三个概念</p>
<ul>
<li>前方一致：其实部分相同</li>
<li>中间一致：存在相同即可，就是说包括前方一致和后方一致</li>
<li>后方一致：末尾部分相同</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 前方一致</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> SampleLike <span class="keyword">where</span> strcol <span class="keyword">like</span> <span class="string">&#x27;ddd%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 中间一致</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> SampleLike <span class="keyword">where</span> strcol <span class="keyword">like</span> <span class="string">&#x27;%ddd%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 后方一致</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> SampleLike <span class="keyword">where</span> strcol <span class="keyword">like</span> <span class="string">&#x27;%ddd&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>% 代表 0字符以上的任意字符串<br>_ 代表 任意一个字符，有几个 _ 就只能有几个字符</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> SampleLike <span class="keyword">where</span> strcol <span class="keyword">like</span> <span class="string">&#x27;abc__&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> SampleLike <span class="keyword">where</span> strcol <span class="keyword">like</span> <span class="string">&#x27;abc___&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h6 id="between-范围查询"><a href="#between-范围查询" class="headerlink" title="between 范围查询"></a>between 范围查询</h6><p>包含临界值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> product_name, sale_price <span class="keyword">from</span> Product <span class="keyword">where</span> sale_price <span class="keyword">between</span> <span class="number">100</span> <span class="keyword">and</span> <span class="number">1000</span>;</span><br></pre></td></tr></table></figure>

<h6 id="is-null-、-is-not-null"><a href="#is-null-、-is-not-null" class="headerlink" title="is null 、 is not null"></a>is null 、 is not null</h6><p>判断是否为null</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> product_name, purchase_price <span class="keyword">from</span> Product <span class="keyword">where</span> purchase_price <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">select</span> product_name, purchase_price <span class="keyword">from</span> Product <span class="keyword">where</span> purchase_price <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>

<h6 id="in-–-or的简便用法"><a href="#in-–-or的简便用法" class="headerlink" title="in – or的简便用法"></a>in – or的简便用法</h6><p>否定形式是 not in</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> product_name, purchase_price <span class="keyword">from</span> Product <span class="keyword">where</span> purchase_price <span class="operator">=</span> <span class="number">320</span> <span class="keyword">or</span> purchase_price <span class="operator">=</span> <span class="number">500</span> <span class="keyword">or</span> purchase_price <span class="operator">=</span> <span class="number">5000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> product_name, purchase_price <span class="keyword">from</span> Product <span class="keyword">where</span> purchase_price <span class="keyword">in</span> (<span class="number">320</span>, <span class="number">500</span>, <span class="number">5000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> product_name, purchase_price <span class="keyword">from</span> Product <span class="keyword">where</span> purchase_price <span class="keyword">not</span> <span class="keyword">in</span> (<span class="number">320</span>, <span class="number">500</span>, <span class="number">5000</span>);</span><br></pre></td></tr></table></figure>

<h6 id="使用子查询作为in谓词的参数"><a href="#使用子查询作为in谓词的参数" class="headerlink" title="使用子查询作为in谓词的参数"></a>使用子查询作为in谓词的参数</h6><p>先创建一个商品商店的关联表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> ShopProduct (</span><br><span class="line">    shop_id <span class="type">varchar</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span> ,</span><br><span class="line">    shop_name <span class="type">varchar</span>(<span class="number">200</span>) <span class="keyword">not</span> <span class="keyword">null</span> ,</span><br><span class="line">    product_id <span class="type">varchar</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span> ,</span><br><span class="line">    quantity <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span> ,</span><br><span class="line">    <span class="keyword">primary</span> key (shop_id, product_id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">start</span> transaction ;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> ShopProduct <span class="keyword">values</span> (<span class="string">&#x27;000A&#x27;</span>, <span class="string">&#x27;东京&#x27;</span>, <span class="string">&#x27;0001&#x27;</span>, <span class="number">30</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> ShopProduct <span class="keyword">values</span> (<span class="string">&#x27;000A&#x27;</span>, <span class="string">&#x27;东京&#x27;</span>, <span class="string">&#x27;0002&#x27;</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> ShopProduct <span class="keyword">values</span> (<span class="string">&#x27;000A&#x27;</span>, <span class="string">&#x27;东京&#x27;</span>, <span class="string">&#x27;0003&#x27;</span>, <span class="number">15</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> ShopProduct <span class="keyword">values</span> (<span class="string">&#x27;000B&#x27;</span>, <span class="string">&#x27;名古屋&#x27;</span>, <span class="string">&#x27;0002&#x27;</span>, <span class="number">30</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> ShopProduct <span class="keyword">values</span> (<span class="string">&#x27;000B&#x27;</span>, <span class="string">&#x27;名古屋&#x27;</span>, <span class="string">&#x27;0003&#x27;</span>, <span class="number">120</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> ShopProduct <span class="keyword">values</span> (<span class="string">&#x27;000B&#x27;</span>, <span class="string">&#x27;名古屋&#x27;</span>, <span class="string">&#x27;0004&#x27;</span>, <span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> ShopProduct <span class="keyword">values</span> (<span class="string">&#x27;000B&#x27;</span>, <span class="string">&#x27;名古屋&#x27;</span>, <span class="string">&#x27;0006&#x27;</span>, <span class="number">10</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> ShopProduct <span class="keyword">values</span> (<span class="string">&#x27;000B&#x27;</span>, <span class="string">&#x27;名古屋&#x27;</span>, <span class="string">&#x27;0007&#x27;</span>, <span class="number">40</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> ShopProduct <span class="keyword">values</span> (<span class="string">&#x27;000C&#x27;</span>, <span class="string">&#x27;大阪&#x27;</span>, <span class="string">&#x27;0003&#x27;</span>, <span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> ShopProduct <span class="keyword">values</span> (<span class="string">&#x27;000C&#x27;</span>, <span class="string">&#x27;大阪&#x27;</span>, <span class="string">&#x27;0004&#x27;</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> ShopProduct <span class="keyword">values</span> (<span class="string">&#x27;000C&#x27;</span>, <span class="string">&#x27;大阪&#x27;</span>, <span class="string">&#x27;0006&#x27;</span>, <span class="number">90</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> ShopProduct <span class="keyword">values</span> (<span class="string">&#x27;000C&#x27;</span>, <span class="string">&#x27;大阪&#x27;</span>, <span class="string">&#x27;0007&#x27;</span>, <span class="number">70</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> ShopProduct <span class="keyword">values</span> (<span class="string">&#x27;000D&#x27;</span>, <span class="string">&#x27;福冈&#x27;</span>, <span class="string">&#x27;0001&#x27;</span>, <span class="number">100</span>);</span><br><span class="line"><span class="keyword">commit</span> ;</span><br></pre></td></tr></table></figure>

<p>找出在大阪销售的商品，这里就要用到子查询</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> product_name, sale_price <span class="keyword">from</span> Product <span class="keyword">where</span> product_id <span class="keyword">in</span> (<span class="keyword">select</span> product_id <span class="keyword">from</span> ShopProduct <span class="keyword">where</span> shop_id <span class="operator">=</span> <span class="string">&#x27;000C&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h6 id="exist-谓词"><a href="#exist-谓词" class="headerlink" title="exist 谓词"></a>exist 谓词</h6><p>理论上都可以用 in 和 not in 来代替。<br>只有1个参数，该参数通常都会是一个子查询。<br>exist通常都会使用关联子查询作为参数</p>
<p>同样的，使用 not exist 表示相反的结果</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> product_name, sale_price <span class="keyword">from</span> Product <span class="keyword">as</span> P <span class="keyword">where</span> <span class="keyword">exists</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> ShopProduct <span class="keyword">as</span> SP <span class="keyword">where</span> SP.shop_id <span class="operator">=</span> <span class="string">&#x27;000C&#x27;</span></span><br><span class="line">    <span class="keyword">and</span> SP.product_id <span class="operator">=</span> P.product_id);</span><br></pre></td></tr></table></figure>

<h5 id="case表达式"><a href="#case表达式" class="headerlink" title="case表达式"></a>case表达式</h5><p>和if-else差不多，有多个条件需要判断，最终只会有一个返回结果</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> product_name,</span><br><span class="line">       <span class="keyword">case</span> <span class="keyword">when</span> product_type <span class="operator">=</span> <span class="string">&#x27;衣服&#x27;</span> <span class="keyword">then</span> concat(<span class="string">&#x27;A: &#x27;</span>, product_type)</span><br><span class="line">            <span class="keyword">when</span> product_type <span class="operator">=</span> <span class="string">&#x27;办公用品&#x27;</span> <span class="keyword">then</span> concat(<span class="string">&#x27;B: &#x27;</span>, product_type)</span><br><span class="line">            <span class="keyword">when</span> product_type <span class="operator">=</span> <span class="string">&#x27;厨房用具&#x27;</span> <span class="keyword">then</span> concat(<span class="string">&#x27;C: &#x27;</span>, product_type)</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">null</span></span><br><span class="line">           <span class="keyword">end</span> <span class="keyword">as</span> abc_product_type</span><br><span class="line"><span class="keyword">from</span> Product;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> product_type <span class="operator">=</span> <span class="string">&#x27;衣服&#x27;</span> <span class="keyword">then</span> sale_price <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>) <span class="keyword">as</span> sum_price_clothes,</span><br><span class="line">       <span class="built_in">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> product_type <span class="operator">=</span> <span class="string">&#x27;厨房用具&#x27;</span> <span class="keyword">then</span> sale_price <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>) <span class="keyword">as</span> sum_price_kitchen,</span><br><span class="line">       <span class="built_in">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> product_type <span class="operator">=</span> <span class="string">&#x27;办公用品&#x27;</span> <span class="keyword">then</span> sale_price <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>) <span class="keyword">as</span> sum_price_office</span><br><span class="line"><span class="keyword">from</span> Product;</span><br></pre></td></tr></table></figure>

<p>上面使用的是搜索CASE表达式，下面用简单CASE表达式来实现以下</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> product_name,</span><br><span class="line">       <span class="keyword">case</span> product_type</span><br><span class="line">           <span class="keyword">when</span> <span class="string">&#x27;衣服&#x27;</span> <span class="keyword">then</span> concat(<span class="string">&#x27;A: &#x27;</span>, product_type)</span><br><span class="line">           <span class="keyword">when</span> <span class="string">&#x27;办公用品&#x27;</span> <span class="keyword">then</span> concat(<span class="string">&#x27;B: &#x27;</span>, product_type)</span><br><span class="line">           <span class="keyword">when</span> <span class="string">&#x27;厨房用具&#x27;</span> <span class="keyword">then</span> concat(<span class="string">&#x27;C: &#x27;</span>, product_type)</span><br><span class="line">           <span class="keyword">else</span> <span class="keyword">null</span></span><br><span class="line">        <span class="keyword">end</span> <span class="keyword">as</span> abc_product_type</span><br><span class="line"><span class="keyword">from</span> Product;</span><br></pre></td></tr></table></figure>
<p>简单case表达式看上去和代码里的switch差不多了</p>
<h4 id="集合运算"><a href="#集合运算" class="headerlink" title="集合运算"></a>集合运算</h4><p>通过集合运算，可以得到两张表中记录的集合或者公共记录的集合，又或者其中某张表中的记录的集合。像这样用来进行集合运算的运算符称为集合运算符。</p>
<h5 id="表的加减法"><a href="#表的加减法" class="headerlink" title="表的加减法"></a>表的加减法</h5><h6 id="表的加法-union（并集）"><a href="#表的加法-union（并集）" class="headerlink" title="表的加法 - union（并集）"></a>表的加法 - union（并集）</h6><p>会去除重复的记录</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> product_id, product_name <span class="keyword">from</span> Product <span class="keyword">union</span> <span class="keyword">select</span> product_id, product_name <span class="keyword">from</span> Product2;</span><br></pre></td></tr></table></figure>

<p><strong>注意事项</strong></p>
<ol>
<li>select的列必须一致</li>
<li>select的列的类型必须一致</li>
<li>如果有order by的话，必须放在最后使用</li>
</ol>
<p>保留重复行，在union后面加一个all即可</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> product_id, product_name <span class="keyword">from</span> Product <span class="keyword">union</span> <span class="keyword">all</span> <span class="keyword">select</span> product_id, product_name <span class="keyword">from</span> Product2;</span><br></pre></td></tr></table></figure>

<h6 id="选取表中公共部分-intersect（MySQL不支持）"><a href="#选取表中公共部分-intersect（MySQL不支持）" class="headerlink" title="选取表中公共部分 - intersect（MySQL不支持）"></a>选取表中公共部分 - intersect（MySQL不支持）</h6><p>希望保留重复行，同样是加上all</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> product_id, product_name <span class="keyword">from</span> Product <span class="keyword">intersect</span> <span class="keyword">select</span> product_id, product_name <span class="keyword">from</span> Product2;</span><br></pre></td></tr></table></figure>

<h6 id="记录的减法-except（MySQL不支持）"><a href="#记录的减法-except（MySQL不支持）" class="headerlink" title="记录的减法 - except（MySQL不支持）"></a>记录的减法 - except（MySQL不支持）</h6><p>要注意左右关系，左边 - 右边</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> product_id, product_name <span class="keyword">from</span> Product <span class="keyword">except</span> <span class="keyword">select</span> product_id, product_name <span class="keyword">from</span> Product2 <span class="keyword">order</span> <span class="keyword">by</span> product_id;</span><br></pre></td></tr></table></figure>

<h5 id="联结（以列为单位对表进行联结）"><a href="#联结（以列为单位对表进行联结）" class="headerlink" title="联结（以列为单位对表进行联结）"></a>联结（以列为单位对表进行联结）</h5><p>一个表中的数据往往不够，这时候要从别的表中把列拿过来，这时候用联结<br>以表A的列作为桥梁，将表B中满足同样条件的列汇集到同一结果之中</p>
<h6 id="内联结-inner-join"><a href="#内联结-inner-join" class="headerlink" title="内联结 - inner join"></a>内联结 - inner join</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SP.shop_id, SP.shop_name, SP.product_id, P.product_name, P.sale_price</span><br><span class="line"><span class="keyword">from</span> ShopProduct <span class="keyword">as</span> SP <span class="keyword">inner</span> <span class="keyword">join</span> Product <span class="keyword">as</span> P <span class="keyword">on</span> SP.product_id <span class="operator">=</span> P.product_id</span><br></pre></td></tr></table></figure>

<p>内联结要点</p>
<ol>
<li>进行联结时需要在from字句中使用多张表</li>
<li>on必不可少，它指定了联结条件，需要指定多个键时，可以使用and、or。必须在from和where之间</li>
<li>select指定列时，有些列是共有的，有些列是独有的，独有的列可以不写&lt;表的别名&gt;.&lt;列名&gt;这种形式，共有的一定要写，这里为了不混乱，全都写上表名</li>
</ol>
<p>内联结和where子句结合使用</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SP.shop_id, SP.shop_name, SP.product_id, P.product_name, P.sale_price</span><br><span class="line"><span class="keyword">from</span> ShopProduct <span class="keyword">as</span> SP <span class="keyword">inner</span> <span class="keyword">join</span> Product <span class="keyword">as</span> P <span class="keyword">on</span> SP.product_id <span class="operator">=</span> P.product_id <span class="keyword">where</span> SP.shop_id <span class="operator">=</span> <span class="string">&#x27;000A&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>联结之后的结果可以想象为一个新表，我们可以对这个表使用where，group by，having，order by等工具</p>
<h6 id="外连接-outer-join"><a href="#外连接-outer-join" class="headerlink" title="外连接 - outer join"></a>外连接 - outer join</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SP.shop_id, SP.shop_name, SP.product_id, P.product_name, P.sale_price</span><br><span class="line"><span class="keyword">from</span> ShopProduct <span class="keyword">as</span> SP <span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> Product <span class="keyword">as</span> P <span class="keyword">on</span> SP.product_id <span class="operator">=</span> P.product_id;</span><br></pre></td></tr></table></figure>

<p>外连接的结果比内联结多了两条数据，这两条数据是ShopProduct中product_id没有的。也就是说，当我使用外连接时，先像内联结一样，找出联结点关联的数据，如果还有没有关联到的数据，就继续取出来。这里有一个<strong>left</strong>和<strong>right</strong>，就涉及到取哪边的数据了。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SP.shop_id, SP.shop_name, SP.product_id, P.product_name, P.sale_price</span><br><span class="line"><span class="keyword">from</span> Product <span class="keyword">as</span> P <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> ShopProduct <span class="keyword">as</span> SP <span class="keyword">on</span> SP.product_id <span class="operator">=</span> P.product_id;</span><br></pre></td></tr></table></figure>
<p>这两条sql结果是一样的</p>
<h6 id="3张以上表的联结"><a href="#3张以上表的联结" class="headerlink" title="3张以上表的联结"></a>3张以上表的联结</h6><p>表的联结是没有数量限制的</p>
<p>准备一个表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> InventoryProduct (</span><br><span class="line">    inventory_id <span class="type">char</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span> ,</span><br><span class="line">    product_id <span class="type">char</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span> ,</span><br><span class="line">    inventory_quantity <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span> ,</span><br><span class="line">    <span class="keyword">primary</span> key (inventory_id, product_id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> InventoryProduct (inventory_id, product_id, inventory_quantity) <span class="keyword">VALUES</span> (<span class="string">&#x27;P001&#x27;</span>, <span class="string">&#x27;0001&#x27;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> InventoryProduct (inventory_id, product_id, inventory_quantity) <span class="keyword">VALUES</span> (<span class="string">&#x27;P001&#x27;</span>, <span class="string">&#x27;0002&#x27;</span>, <span class="number">120</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> InventoryProduct (inventory_id, product_id, inventory_quantity) <span class="keyword">VALUES</span> (<span class="string">&#x27;P001&#x27;</span>, <span class="string">&#x27;0003&#x27;</span>, <span class="number">200</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> InventoryProduct (inventory_id, product_id, inventory_quantity) <span class="keyword">VALUES</span> (<span class="string">&#x27;P001&#x27;</span>, <span class="string">&#x27;0004&#x27;</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> InventoryProduct (inventory_id, product_id, inventory_quantity) <span class="keyword">VALUES</span> (<span class="string">&#x27;P001&#x27;</span>, <span class="string">&#x27;0005&#x27;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> InventoryProduct (inventory_id, product_id, inventory_quantity) <span class="keyword">VALUES</span> (<span class="string">&#x27;P001&#x27;</span>, <span class="string">&#x27;0006&#x27;</span>, <span class="number">99</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> InventoryProduct (inventory_id, product_id, inventory_quantity) <span class="keyword">VALUES</span> (<span class="string">&#x27;P001&#x27;</span>, <span class="string">&#x27;0007&#x27;</span>, <span class="number">999</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> InventoryProduct (inventory_id, product_id, inventory_quantity) <span class="keyword">VALUES</span> (<span class="string">&#x27;P001&#x27;</span>, <span class="string">&#x27;0008&#x27;</span>, <span class="number">200</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> InventoryProduct (inventory_id, product_id, inventory_quantity) <span class="keyword">VALUES</span> (<span class="string">&#x27;P002&#x27;</span>, <span class="string">&#x27;0001&#x27;</span>, <span class="number">10</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> InventoryProduct (inventory_id, product_id, inventory_quantity) <span class="keyword">VALUES</span> (<span class="string">&#x27;P002&#x27;</span>, <span class="string">&#x27;0002&#x27;</span>, <span class="number">25</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> InventoryProduct (inventory_id, product_id, inventory_quantity) <span class="keyword">VALUES</span> (<span class="string">&#x27;P002&#x27;</span>, <span class="string">&#x27;0003&#x27;</span>, <span class="number">34</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> InventoryProduct (inventory_id, product_id, inventory_quantity) <span class="keyword">VALUES</span> (<span class="string">&#x27;P002&#x27;</span>, <span class="string">&#x27;0004&#x27;</span>, <span class="number">19</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> InventoryProduct (inventory_id, product_id, inventory_quantity) <span class="keyword">VALUES</span> (<span class="string">&#x27;P002&#x27;</span>, <span class="string">&#x27;0005&#x27;</span>, <span class="number">99</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> InventoryProduct (inventory_id, product_id, inventory_quantity) <span class="keyword">VALUES</span> (<span class="string">&#x27;P002&#x27;</span>, <span class="string">&#x27;0006&#x27;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> InventoryProduct (inventory_id, product_id, inventory_quantity) <span class="keyword">VALUES</span> (<span class="string">&#x27;P002&#x27;</span>, <span class="string">&#x27;0007&#x27;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> InventoryProduct (inventory_id, product_id, inventory_quantity) <span class="keyword">VALUES</span> (<span class="string">&#x27;P002&#x27;</span>, <span class="string">&#x27;0008&#x27;</span>, <span class="number">18</span>);</span><br><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure>

<p>现在需要把仓库P001的产品数量，和商店的信息、产品信息展示出来</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SP.shop_id, SP.shop_name, SP.product_id, P.product_name, P.sale_price, IP.inventory_quantity</span><br><span class="line"><span class="keyword">from</span> ShopProduct <span class="keyword">as</span> SP <span class="keyword">inner</span> <span class="keyword">join</span> Product <span class="keyword">as</span> P <span class="keyword">on</span> SP.product_id <span class="operator">=</span> P.product_id</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> InventoryProduct <span class="keyword">as</span> IP <span class="keyword">on</span> SP.product_id <span class="operator">=</span> IP.product_id <span class="keyword">where</span> IP.inventory_id <span class="operator">=</span> <span class="string">&#x27;P001&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>这里先把ShopProduct表和Product表联结，再和InventoryProduct表联结，Product表就不需要再和InventoryProduct表联结了</p>
<h6 id="交叉联结-cross-join"><a href="#交叉联结-cross-join" class="headerlink" title="交叉联结 - cross join"></a>交叉联结 - cross join</h6><p>很少使用，但是是所有联结运算的基础</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SP.shop_id, SP.shop_name, SP.product_id, P.product_name</span><br><span class="line"><span class="keyword">from</span> ShopProduct <span class="keyword">as</span> SP <span class="keyword">cross</span> <span class="keyword">join</span> Product <span class="keyword">as</span> P;</span><br></pre></td></tr></table></figure>

<p>结果有104个记录，ShopProduct有13条记录，Product有8条记录，13x8=104。是两个表交叉组合的结果。<br>所以，内联结是交叉联结的一部分，”内“也可以理解为”包含在交叉联结结果中的部分“。相反，外联结的”外“可以理解为”交叉联结结果之外的部分“</p>

      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a>, <a href="/tags/sql/">sql</a>, <a href="/tags/%E5%9F%BA%E7%A1%80/">基础</a>
  </div>

        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script src="//s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">留言</h1>

  
      <div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=123456789012345";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<div class="fb-comments" data-href="https://leejnull.github.io/2020/01/10/2020-01-10-01/index.html" data-num-posts="5" data-width="840" data-colorscheme="light"></div>
      
  
</section>

</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="as_sitesearch" value="leejnull.github.io">
  </form>
</div>


  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/Git/">Git</a><small>1</small></li>
  
    <li><a href="/categories/Go/">Go</a><small>4</small></li>
  
    <li><a href="/categories/Python/">Python</a><small>3</small></li>
  
    <li><a href="/categories/iOS/">iOS</a><small>24</small></li>
  
    <li><a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><small>2</small></li>
  
    <li><a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/">数据结构与算法</a><small>10</small></li>
  
    <li><a href="/categories/%E6%97%A5%E5%B8%B8/">日常</a><small>2</small></li>
  
    <li><a href="/categories/%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/">朝花夕拾</a><small>2</small></li>
  
    <li><a href="/categories/%E8%BF%90%E7%BB%B4/">运维</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/Codable/">Codable</a><small>1</small></li>
  
    <li><a href="/tags/Crash/">Crash</a><small>1</small></li>
  
    <li><a href="/tags/Django/">Django</a><small>3</small></li>
  
    <li><a href="/tags/Event/">Event</a><small>1</small></li>
  
    <li><a href="/tags/ISA/">ISA</a><small>1</small></li>
  
    <li><a href="/tags/KVC/">KVC</a><small>1</small></li>
  
    <li><a href="/tags/KVO/">KVO</a><small>1</small></li>
  
    <li><a href="/tags/Mac%E4%BD%BF%E7%94%A8/">Mac使用</a><small>2</small></li>
  
    <li><a href="/tags/MarkDown/">MarkDown</a><small>1</small></li>
  
    <li><a href="/tags/Mysql/">Mysql</a><small>1</small></li>
  
    <li><a href="/tags/Python/">Python</a><small>2</small></li>
  
    <li><a href="/tags/RunLoop/">RunLoop</a><small>1</small></li>
  
    <li><a href="/tags/Swift/">Swift</a><small>2</small></li>
  
    <li><a href="/tags/UITextView/">UITextView</a><small>1</small></li>
  
    <li><a href="/tags/Vue/">Vue</a><small>1</small></li>
  
    <li><a href="/tags/Xcode/">Xcode</a><small>1</small></li>
  
    <li><a href="/tags/Xib/">Xib</a><small>1</small></li>
  
    <li><a href="/tags/flag/">flag</a><small>1</small></li>
  
    <li><a href="/tags/iOS/">iOS</a><small>22</small></li>
  
    <li><a href="/tags/import/">import</a><small>1</small></li>
  
    <li><a href="/tags/nginx/">nginx</a><small>1</small></li>
  
    <li><a href="/tags/package/">package</a><small>1</small></li>
  
    <li><a href="/tags/pip/">pip</a><small>1</small></li>
  
    <li><a href="/tags/runtime/">runtime</a><small>1</small></li>
  
    <li><a href="/tags/sql/">sql</a><small>2</small></li>
  
    <li><a href="/tags/uwsgi/">uwsgi</a><small>1</small></li>
  
    <li><a href="/tags/%E4%BC%98%E5%8C%96/">优化</a><small>1</small></li>
  
    <li><a href="/tags/%E4%BD%8D%E8%BF%90%E7%AE%97/">位运算</a><small>1</small></li>
  
    <li><a href="/tags/%E5%86%85%E5%AD%98/">内存</a><small>2</small></li>
  
    <li><a href="/tags/%E5%8A%A8%E7%94%BB/">动画</a><small>1</small></li>
  
    <li><a href="/tags/%E5%8E%9F%E7%90%86/">原理</a><small>1</small></li>
  
    <li><a href="/tags/%E5%93%88%E5%B8%8C%E8%A1%A8/">哈希表</a><small>1</small></li>
  
    <li><a href="/tags/%E5%9B%BE%E5%B1%82/">图层</a><small>1</small></li>
  
    <li><a href="/tags/%E5%9F%BA%E7%A1%80/">基础</a><small>2</small></li>
  
    <li><a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/">多线程</a><small>2</small></li>
  
    <li><a href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/">字符串</a><small>1</small></li>
  
    <li><a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><small>14</small></li>
  
    <li><a href="/tags/%E5%AE%9A%E6%97%B6%E5%99%A8/">定时器</a><small>1</small></li>
  
    <li><a href="/tags/%E5%AF%8C%E6%96%87%E6%9C%AC/">富文本</a><small>1</small></li>
  
    <li><a href="/tags/%E5%B0%8F%E6%84%9F%E6%83%B3/">小感想</a><small>1</small></li>
  
    <li><a href="/tags/%E5%B0%8F%E6%8A%80%E5%B7%A7/">小技巧</a><small>1</small></li>
  
    <li><a href="/tags/%E5%B9%B6%E5%8F%91/">并发</a><small>1</small></li>
  
    <li><a href="/tags/%E5%BA%95%E5%B1%82/">底层</a><small>2</small></li>
  
    <li><a href="/tags/%E6%80%A7%E8%83%BD/">性能</a><small>1</small></li>
  
    <li><a href="/tags/%E6%8A%A5%E9%94%99/">报错</a><small>1</small></li>
  
    <li><a href="/tags/%E6%8E%92%E5%BA%8F/">排序</a><small>5</small></li>
  
    <li><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a><small>2</small></li>
  
    <li><a href="/tags/%E6%97%A5%E5%B8%B8%E5%8F%8D%E6%80%9D/">日常反思</a><small>1</small></li>
  
    <li><a href="/tags/%E6%97%A5%E5%B8%B8%E5%BC%80%E5%8F%91/">日常开发</a><small>2</small></li>
  
    <li><a href="/tags/%E6%9E%B6%E6%9E%84/">架构</a><small>1</small></li>
  
    <li><a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">正则表达式</a><small>1</small></li>
  
    <li><a href="/tags/%E7%AE%97%E6%B3%95/">算法</a><small>8</small></li>
  
    <li><a href="/tags/%E7%BB%93%E6%9E%84%E4%BD%93/">结构体</a><small>1</small></li>
  
    <li><a href="/tags/%E7%BB%98%E5%88%B6/">绘制</a><small>2</small></li>
  
    <li><a href="/tags/%E7%BF%BB%E8%AF%91/">翻译</a><small>1</small></li>
  
    <li><a href="/tags/%E9%93%BE%E8%A1%A8/">链表</a><small>1</small></li>
  
    <li><a href="/tags/%E9%94%81/">锁</a><small>1</small></li>
  
    <li><a href="/tags/%E9%98%9F%E5%88%97/">队列</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2021 Lee JJ
  
</div>
<div class="clearfix"></div></footer>
  
<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/jquery.imagesloaded.min.js"></script>


<script src="/js/gallery.js"></script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script src="/fancybox/jquery.fancybox.pack.js"></script>

<script>
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>
